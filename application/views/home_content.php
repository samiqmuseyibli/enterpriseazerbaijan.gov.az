<style type="text/css">
  .one_fifth_less .box_ent {
    height: 400px !important;
  }

  .fontmwhite_p {
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    line-height: 16px;
    color: #e9e9e9;
    font-weight: 500;
    font-size: 14px;
    text-shadow: 1px 0 7px #2a363f;
    margin-top: 15px;
  }

  .fontmwhite_mp {
    font-size: 25px;
    font-weight: bold;
  }

  @media (min-width: 768px) {

    .home_1c {

      display: flex;
      justify-content: center;

    }

  }

  @media (max-width: 768px) {
    .margin-lftr {
      display: block !important;
    }

    .one_fifth_less .box_ent {
      height: 300px !important;
    }

  }

  .linebg_10 {
    display: block;
    vertical-align: central;
    width: 130px;
    height: 2px;
    margin-top: 35px;
    margin-bottom: 35px;
    background-color: #834b9b;
    margin-right: auto;
    margin-left: auto;
  }

  .linebg_11 {
    display: block;
    vertical-align: central;
    width: 130px;
    height: 2px;
    margin-top: 35px;
    margin-bottom: 45px;
    background-color: #834b9b;
    margin-right: auto;
    margin-left: auto;
  }

  .linebg_12 {
    display: block;
    vertical-align: central;
    width: 130px;
    height: 2px;
    margin-top: 0px;
    margin-bottom: 15px;
    background-color: #834b9b;
    margin-right: auto;
    margin-left: auto;
  }

  .clr_ent {
    background: #834b9b !important;
  }

  .clr_ent:hover {
    background: #b7883c !important;
  }

  .feature_section_pdd {

    padding: 120px 0px 97px 0px !important;

  }

  .ent_title {
    font-size: 23px;
    line-height: 30px;
  }

  .feature_section7 .box {

    border-radius: 25px !important;

  }

  .linebg {
    background-color: #834b9b !important;
  }

  .less_ent {
    width: 100%;
    margin: 0 auto;
  }

  .margin-lftr {
    display: flex;
    justify-content: center;
  }

  .custom-slider {
    position: relative;
    border-radius: 16px;
    width: 952px;
    height: 506px;
    overflow: hidden;
  }

  .slides {
    display: flex;
    flex-direction: row;
    transition: transform 0.8s ease-in-out;
    width: 100%;
  }

  .slide {
    width: 100%;
    height: 506px;
    background-size: cover;
    background-position: center;
    display: flex;
    position: relative;
    flex-shrink: 0;
    justify-content: center;
    align-items: center;
    text-align: center;
    overflow: hidden;
  }

  @media (max-width: 768px) {
    .home-leftbar {
      display: block !important;
    }

    .slider-box {
      width: 100% !important;
    }

    .custom-slider {
      width: 100% !important;
    }

    .slide-content h2 {
      font-size: 18px !important;
    }

    .btn-more {
      padding: 10px 20px !important;
      font-size: 14px !important;
    }
  }

  @media (max-width: 480px) {
    .home-slider-title {
      font-size: 18px !important;
    }

    .custom-slider {
      height: 356px !important;
    }

    .slide {
      height: 356px !important;
    }

    .home-slider-desc {
      font-size: 14px !important;
    }

    .slider-box-content {
      max-width: 200px !important;
    }

    .icon-wrapper {
      width: 45px !important;
      height: 50px !important;
    }

    .margin_bottom3 {
      display: none !important;
    }

    .slide-content h2 {
      font-size: 16px !important;
    }

    .btn-more {
      padding: 8px 14px !important;
      font-size: 12px !important;
    }

  }

  .slide.active {
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
  }

  .slide-content {
    color: white;
    max-width: 70%;
    z-index: 2;
  }


  .slide::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1;
  }

  .slide-content h2 {
    color: #FFF;
    text-align: center;
    /*font-size: 36px;*/
    font-weight: 600;
    position: relative;
    z-index: 2;
  }

  .btn-more {
    background: #996BAC;
    padding: 13px 24px;
    border-radius: 6px;
    text-decoration: none;
    color: #FFF;
    font-size: 18px;
    z-index: 5;
    font-weight: 500;
  }

  .dots {
    text-align: center;
    position: absolute;
    bottom: 15px;
    width: 100%;
    z-index: 3;
  }

  .dot {
    height: 10px;
    width: 10px;
    margin: 0 5px;
    display: inline-block;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.5);
    cursor: pointer;
  }

  .dot.active {
    background: #fff;
  }

  .home-leftbar {
    display: flex;
    gap: 29px;
  }

  .slider-box {
    display: flex;
    align-items: center;
    gap: 18px;
    width: 361px;
    height: 114px;
    border-radius: 16px;
    border: 1px solid #E3E3E3;
    background: #F3F3F3;
    box-shadow: 0 4px 4px 0 rgba(0, 0, 0, 0.08);
    margin-bottom: 15px;
    padding: 16px 10px;
    transition: all 0.3s ease;
  }

  .home-slider-title {
    color: #824C9B;
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 3px;
    text-align: left;
    transition: all 0.3s ease;
  }

  .home-slider-desc {
    color: #999;
    font-size: 16px;
    font-weight: 400;
    text-align: left;
    transition: all 0.3s ease;
  }

  .icon-wrapper {
    width: 63px;
    height: 64px;
    border-radius: 50%;
    background: #824C9B;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: all 0.3s ease;
  }

  .slider-box-content {
    max-width: 256px;
  }

  .icon-wrapper img svg path {
    stroke: white;
    transition: stroke 0.3s ease;
  }

  .slider-box:hover {
    background: #824C9B;
    border-color: #824C9B;
  }

  .slider-box:hover .home-slider-title,
  .slider-box:hover .home-slider-desc {
    color: #fff;
  }

  .slider-box:hover .icon-wrapper {
    background: #fff;
  }

  .slider-box:hover .icon-wrapper img {
    filter: brightness(0) saturate(100%) invert(54%) sepia(20%) saturate(1524%) hue-rotate(242deg) brightness(60%) contrast(100%);
  }

  .video-container {
    padding: 10px !important;
  }

  .video-item {
    box-shadow: none !important;
    width: 367px !important;
  }

  .video-item-text {
    height: 333px;
    overflow: hidden;
    text-overflow: ellipsis;
    color: #545E69 !important;
    font-size: 19.401px !important;
    font-weight: 400 !important;
    padding-left: 0px !important;
  }

  .video-date-time {
    color: #777;
    font-size: 15.569px;
    font-weight: 400;
  }

  .video-item-cover-container {
    position: relative;
    display: block;
  }

  .video-item-cover {
    height: 201px !important;
    width: 100%;
    object-fit: cover;
    display: block;
    border: 1px solid rgba(95, 95, 95, 0.37) !important;
    border-bottom-left-radius: 16px !important;
    border-bottom-right-radius: 16px !important;
    border-top-left-radius: 16px !important;
    border-top-right-radius: 16px !important;
  }

  .video-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 201px;
    background: rgba(0, 0, 0, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity 0.3s ease;
    */ border-radius: 16px;
  }

  .video-item:hover .video-overlay {
    opacity: 1;
  }

  .play-icon {
    width: 60px;
    height: 60px;
    background: transparent;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .play-icon svg {
    fill: #fff;
    margin-left: 4px;
  }

  /* Partners Slider Styles */
  .partners-swiper {
    padding: 64px 0 87px 0;
    position: relative;
    background: #E9E9E9 !important;
    width: 100%;
    overflow: hidden;
  }

  /* Container for centered content */
  .partners-swiper-container {
    max-width: 1400px;
    margin: 0 auto;
    position: relative;
    padding: 0 70px;
  }

  .feature_section1 {
    background: #fff !important;
  }

  .partners-grid {
    display: grid;
    gap: 40px 0px;
    column-gap: 20px;
    padding: 20px 80px;
    align-items: center;
    justify-items: center;
    grid-template-columns: repeat(5, 1fr);
    grid-template-rows: repeat(2, 1fr);
  }

  .partner-item {
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.3s ease;
  }

  .partner-item:hover {
    transform: scale(1.05);
  }

  .partner-item img {
    width: 234px;
    height: 76px;
    padding: 10px;
    object-fit: contain;
    transition: filter 0.3s ease;
    background: #fff;
    border-radius: 8px;
  }

  .partner-item:hover img {
    filter: grayscale(0%);
  }

  /* Swiper Navigation */
  .partners-swiper-container .swiper-button-next,
  .partners-swiper-container .swiper-button-prev {
    color: #fff !important;
    background: #C8C8C8;
    border-radius: 8px;
    width: 50px !important;
    height: 50px !important;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    z-index: 10;
    margin-top: 0;
  }

  .partners-swiper-container .swiper-button-next:after,
  .partners-swiper-container .swiper-button-prev:after {
    font-size: 18px !important;
    font-weight: bold;
    color: white !important;
  }

  .partners-swiper-container .swiper-button-prev {
    left: 10px;
  }

  .partners-swiper-container .swiper-button-next {
    right: 10px;
  }

  /* Responsive Design */
  @media (max-width: 1480px) {
    .partners-grid {
      grid-template-columns: repeat(4, 1fr) !important;
      gap: 25px 30px !important;
      padding: 20px 60px !important;
    }

    .partner-item img {
      width: 224px;
      height: 66px;
    }
  }

  @media (max-width: 1200px) {
    .partners-swiper-container {
      padding: 0 65px;
    }

    .partners-grid {
      padding: 20px 40px !important;
    }
  }

  @media (max-width: 1116px) {
    .partners-swiper-container {
      padding: 0 60px;
    }

    .partners-grid {
      grid-template-columns: repeat(3, 1fr) !important;
      gap: 20px 25px !important;
      padding: 15px 30px !important;
    }

    .partner-item img {
      width: 214px;
      height: 56px;
    }
  }

  @media (max-width: 768px) {
    .partners-swiper-container {
      padding: 0 60px;
    }

    .partners-grid {
      grid-template-columns: repeat(2, 1fr) !important;
      gap: 15px 20px !important;
      padding: 10px 20px !important;
    }

    .partner-item img {
      width: 204px;
      height: 46px;
    }

    .partners-swiper-container .swiper-button-next,
    .partners-swiper-container .swiper-button-prev {
      width: 40px !important;
      height: 40px !important;
    }

    .partners-swiper-container .swiper-button-next:after,
    .partners-swiper-container .swiper-button-prev:after {
      font-size: 14px !important;
    }
  }

  @media (max-width: 540px) {
    .partners-swiper-container {
      padding: 0 50px;
    }

    .partners-grid {
      grid-template-columns: repeat(1, 1fr) !important;
      gap: 15px 20px !important;
      padding: 10px 15px !important;
    }

    .partner-item img {
      width: 190px;
      height: 36px;
    }
  }

  @media (max-width: 480px) {
    .partners-swiper-container {
      padding: 0 50px;
    }

    .partners-swiper-container .swiper-button-next,
    .partners-swiper-container .swiper-button-prev {
      width: 35px !important;
      height: 35px !important;
    }

    .partners-swiper-container .swiper-button-next:after,
    .partners-swiper-container .swiper-button-prev:after {
      font-size: 12px !important;
    }

    .partners-swiper-container .swiper-button-prev {
      left: 5px;
    }

    .partners-swiper-container .swiper-button-next {
      right: 5px;
    }
  }

  /* Small mobile screens */
  @media (max-width: 360px) {
    .custom-slider {
      height: 300px !important;
    }

    .slide {
      height: 300px !important;
    }

    .video-item {
      max-width: 260px !important;
    }

    .video-item-cover {
      height: 120px !important;
    }

    .video-overlay {
      height: 120px;
    }

    .video-item-text {
      font-size: 14px !important;
    }

    .video-date-time {
      font-size: 12px;
    }

    .play-icon img {
      width: 35px !important;
      height: 35px !important;
    }
  }
</style>
<?php $l = curLang() ?>
<div class="clearfix"></div>
<div class="feature_section7 feature_section_pdd">
  <div class="container">
    <!-- <h1 class="caps" style="margin-bottom:0px;"><?= translate('EnterpriseAzerbaijan_PRESENCE'); ?></h1> -->
    <div class="clearfix margin_bottom3"></div>

    <!-- <div class="linebg_10"></div> -->
    <div class="home-leftbar">
      <div>
        <div>
          <a href="<?= base_url('project/category/5-ideyalar') ?>">
            <div class="slider-box">
              <div class="icon-wrapper">
                <img src="<?php echo base_url(); ?>assets/front/icons/lightbulb.svg" alt="icon" />
              </div>
              <div class="slider-box-content">
                <div class="home-slider-title"><?= translate('enterprise_incubation') ?></div>
                <p class="home-slider-desc"><?= translate('enterprise_incubation_p') ?></p>
              </div>
            </div>
          </a>
        </div>
        <div>
          <a href="<?= base_url('project/category/1-startap') ?>">
            <div class="slider-box">
              <div class="icon-wrapper">
                <img src="<?php echo base_url(); ?>assets/front/icons/rising_arrow.svg" alt="icon" />
              </div>
              <div class="slider-box-content">
                <div class="home-slider-title"><?= translate('enterprise_acceleration') ?></div>
                <p class="home-slider-desc"><?= translate('enterprise_acceleration_p') ?></p>
              </div>
            </div>
          </a>
        </div>
        <div>
          <a href="<?= base_url('project/all') ?>">
            <div class="slider-box">
              <div class="icon-wrapper">
                <img src="<?php echo base_url(); ?>assets/front/icons/wallet.svg" alt="icon" />
              </div>
              <div class="slider-box-content">
                <div class="home-slider-title"><?= translate('enterprise_vc_studio') ?></div>
                <p class="home-slider-desc"><?= translate('enterprise_vc_studio_p') ?></p>
              </div>
            </div>
          </a>
        </div>
        <div>
          <a href="https://startupschool.az/">
            <div class="slider-box">
              <div class="icon-wrapper">
                <img src="<?php echo base_url(); ?>assets/front/icons/cap.svg" alt="icon" />
              </div>
              <div class="slider-box-content">
                <div class="home-slider-title"><?= translate('startup_school') ?></div>
                <p class="home-slider-desc"><?= translate('startup_school_p') ?></p>
              </div>
            </div>
          </a>
        </div>
      </div>
      <!-- SLIDER START -->
      <?php if ($news): ?>
          
      
      <div class="custom-slider">
        <div class="slides">
            <?php foreach ($news as $item): ?>
                 <div class="slide active"
                    style="background-image: url('<?= base_url('assets/front/images/news/') . $item['url_image']; ?>');">
                    <div class="slide-content">
                      <h2><?= qisalt($item['title_' . $l . ''], 200); ?></h2>
                      <div style="padding-top:17px;">
                        <a href="<?php echo base_url(); ?>news/detail/<?php echo $item['id'] . '-' . $item['top_' . $l . '']; ?>" class="btn-more"><?php echo translate('home_more_info'); ?> →</a>
                      </div>
                    </div>
                  </div>
            <?php endforeach ?>
        </div>
        <!-- Dots -->
        <div class="dots">
            <?php foreach ($news as $index => $item): ?>
                <span class="dot <?= $index === 0 ? 'active' : '' ?>" onclick="currentSlide(<?= $index ?>)"></span>
            <?php endforeach; ?>
        </div>
      </div>
      <?php endif ?>
      <!-- SLIDER END -->
    </div>

  </div>
</div>
<div class="clearfix"></div>
<?php include('filter.php'); ?>
<div class="clearfix"></div>
<div class="feature_section7">
  <div class="container">
    <h1 class="caps" style="margin-bottom:0px;"><?= translate('Why_Azerbaijan') ?></h1>
    <div class="clearfix margin_bottom3"></div>
    <div class="linebg_10"></div>
    <div class="one_fifth_less">
      <?php $doing_business = get_doing_business_detail('8'); ?>
      <a href="<?php echo base_url($l . '/home/doingbusiness/') . $doing_business['id'] . '-' . $doing_business['top']; ?>">
        <div class="box">
          <i class="fa  fa-briefcase "></i>
          <h4 class="white"><?php echo $doing_business['title_' . $l . '']; ?></h4>
        </div>
      </a>
    </div><!-- end -->
    <div class="one_fifth_less">
      <?php $doing_business = get_doing_business_detail('9'); ?>
      <a href="<?php echo base_url($l . '/home/doingbusiness/') . $doing_business['id'] . '-' . $doing_business['top']; ?>">
        <div class="box two">
          <i class="fa fa-building"></i>
          <h4 class="white"><?php echo $doing_business['title_' . $l . '']; ?></h4>
        </div>
      </a>
    </div>
    <!-- end -->
    <div class="one_fifth_less">
      <?php $doing_business = get_doing_business_detail('10'); ?>
      <a href="<?php echo base_url($l . '/home/doingbusiness/') . $doing_business['id'] . '-' . $doing_business['top']; ?>">
        <div class="box three">
          <i class="fa fa-lightbulb-o"></i>
          <h4 class="white"><?php echo $doing_business['title_' . $l . '']; ?></h4>
        </div>
      </a>
    </div>
    <!-- end -->
    <div class="one_fifth_less">
      <?php $doing_business = get_doing_business_detail('11'); ?>
      <a href="<?php echo base_url($l . '/home/doingbusiness/') . $doing_business['id'] . '-' . $doing_business['top']; ?>">
        <div class="box four">
          <i class="fa fa-globe"></i>
          <h4 class="white"><?php echo $doing_business['title_' . $l . '']; ?></h4>
        </div>
      </a>
    </div>
    <!-- end -->
    <div class="one_fifth_less last">
      <?php $doing_business = get_doing_business_detail('12'); ?>
      <a href="<?php echo base_url($l . '/home/doingbusiness/') . $doing_business['id'] . '-' . $doing_business['top']; ?>">
        <div class="box five">
          <i class="fa fa-dollar"></i>
          <h4 class="white"><?php echo $doing_business['title_' . $l . '']; ?></h4>
        </div>
      </a>
    </div>
    <!-- end -->
    <div class="clearfix margin_bottom2"></div>
    <div class="one_fifth_less">
      <?php $doing_business = get_doing_business_detail('13'); ?>
      <a href="<?php echo base_url($l . '/home/doingbusiness/') . $doing_business['id'] . '-' . $doing_business['top']; ?>">
        <div class="box six">
          <i class="fa fa-heartbeat"></i>
          <h4 class="white"><?php echo $doing_business['title_' . $l . '']; ?></h4>
        </div>
      </a>
    </div>
    <!-- end -->
    <div class="one_fifth_less">
      <?php $doing_business = get_doing_business_detail('14'); ?>
      <a href="<?php echo base_url($l . '/home/doingbusiness/') . $doing_business['id'] . '-' . $doing_business['top']; ?>">
        <div class="box seven">
          <i class="fa fa-money"></i>
          <h4 class="white"><?php echo $doing_business['title_' . $l . '']; ?></h4>
        </div>
      </a>
    </div>
    <!-- end -->
    <div class="one_fifth_less">
      <?php $doing_business = get_doing_business_detail('15'); ?>
      <a href="<?php echo base_url($l . '/home/doingbusiness/') . $doing_business['id'] . '-' . $doing_business['top']; ?>">
        <div class="box eight">
          <i class="fa fa-files-o"></i>
          <h4 class="white"><?php echo $doing_business['title_' . $l . '']; ?></h4>
        </div>
      </a>
    </div>
    <!-- end -->
    <div class="one_fifth_less">
      <?php $doing_business = get_doing_business_detail('16'); ?>
      <a href="<?php echo base_url($l . '/home/doingbusiness/') . $doing_business['id'] . '-' . $doing_business['top']; ?>">
        <div class="box nine">
          <i class="fa fa-balance-scale"></i>
          <h4 class="white"><?php echo $doing_business['title_' . $l . '']; ?></h4>
        </div>
      </a>
    </div>
    <!-- end -->
    <div class="one_fifth_less last">
      <?php $doing_business = get_doing_business_detail('17'); ?>
      <a href="<?php echo base_url($l . '/home/doingbusiness/') . $doing_business['id'] . '-' . $doing_business['top']; ?>">
        <div class="box ten">
          <i class="fa  fa-exclamation-triangle "></i>
          <h4 class="white"><?php echo $doing_business['title_' . $l . '']; ?></h4>
        </div>
      </a>
    </div>
    <!-- end -->
  </div>
</div>
<div class="clearfix"></div>
<?php if ($videos): ?>
  <div class="news-layer-yn">
    <div class="container">
      <div class="clearfix margin_bottom3"></div>
      <h1 style="text-align:center; margin-bottom:0px;" class="caps"><?php echo translate('home_video'); ?></h1>
      <div class="clearfix margin_bottom3"></div>
      <div class="owl-carousel owl-theme owl-loaded">
        <div class="owl-stage-outer">
          <div class="owl-stage">
            <?php foreach ($videos as $row): ?>

              <div class="owl-item video-container">
                <div class="news-element-yn video-item">
                  <div class="video-item-cover-container">
                    <img class="photo-yn video-item-cover" src="<?=base_url().$row['v_cover'];?>" alt="<?=$row['v_title_'.$l.'']?>">
                    <div class="video-overlay">
                      <div class="play-icon">
                        <a href="<?=base_url($lang);?>/video/detail/<?=$row['v_id']?>">
                        <img style="width:70px;height:70px;margin-right:6px;"
                          src="<?php echo base_url(); ?>assets/front/icons/play_icon.svg" alt="calendar" />
                        </a>
                      </div>
                    </div>
                    <div class="news-text-yn"
                      style="padding-left:0px;padding-top:15px;justify-content:flex-start;gap:15px;">
                      <p class="text-yn video-item-text"><a href="<?=base_url($lang);?>/video/detail/<?=$row['v_id']?>"><?=qisalt($row['v_title_'.$l.''], 130); ?></a>
                      </p>
                      <div class="date-sign-yn" style="gap:10px;">
                        <div style="display:flex;align-items:center;">
                          <img style="width:14px;height:15px;margin-right:6px;"
                            src="<?php echo base_url(); ?>assets/front/icons/calendar.svg" alt="calendar" />
                          <p class="video-date-time"><?=date_for_view($row['v_createdAt'])?></p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            <?php endforeach ?>
          </div>
        </div>
      </div>
    </div>
  </div>
<?php endif ?>
<div class="clearfix"></div>
<div class="clearfix"></div>
<div class="feature_section1" style="background:#fff;">
  <div class="container">
    <div class="clearfix margin_bottom3"></div>
    <h1 class="caps" style="margin-bottom:0px;margin-top: 40px;">Tərəfdaşlar</h1>
    <div class="clearfix margin_bottom3"></div>
  </div>

  <!-- Swiper with centered container -->
  <div class="partners-swiper">
    <div class="partners-swiper-container">
      <div class="swiper">
        <div class="swiper-wrapper">
          <!-- Slides will be generated by JavaScript -->
        </div>

        <!-- Navigation arrows -->
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
      </div>
    </div>
  </div>
</div>


<?php
// Get partners data from API
$partners = get_partners();
?>

<script>
  let slideIndex = 0;
  showSlides();

  function showSlides() {
    const slides = document.querySelector(".slides"); // Changed to select container
    const dots = document.querySelectorAll(".dot");
    // Remove active class from all dots
    dots.forEach(dot => dot.classList.remove("active"));

    slideIndex++;
    if (slideIndex > 2) { slideIndex = 0; } // Changed condition (0-based indexing)

    // Move the slides container using transform
    slides.style.transform = `translateX(-${slideIndex * 100}%)`;
    dots[slideIndex].classList.add("active");

    setTimeout(showSlides, 4000);
  }

  function currentSlide(n) {
    slideIndex = n;
    const slides = document.querySelector(".slides");
    const dots = document.querySelectorAll(".dot");

    dots.forEach(dot => dot.classList.remove("active"));

    slides.style.transform = `translateX(-${n * 100}%)`;
    dots[n].classList.add("active");
  }
  // Partners Swiper initialization
  var allPartners = <?php echo json_encode($partners); ?>;

  // Partners Swiper initialization
  document.addEventListener('DOMContentLoaded', function () {
    let partnersSwiper;

    function getItemsPerSlide() {
      if (window.innerWidth <= 540) return 2;  // Mobile: 1×2
      if (window.innerWidth <= 768) return 4;  // Tablet: 2×2
      if (window.innerWidth <= 1116) return 6; // Medium: 3×2
      if (window.innerWidth <= 1480) return 8; // Large: 4×2
      return 10; // Desktop: 5×2
    }

    function buildSlides() {
      const wrapper = document.querySelector('.partners-swiper .swiper-wrapper');
      if (!wrapper) {
        console.error('Swiper wrapper not found');
        return;
      }

      const itemsPerSlide = getItemsPerSlide();
      wrapper.innerHTML = '';

      for (let i = 0; i < allPartners.length; i += itemsPerSlide) {
        const slidePartners = allPartners.slice(i, i + itemsPerSlide);

        const slide = document.createElement('div');
        slide.className = 'swiper-slide';

        const grid = document.createElement('div');
        grid.className = 'partners-grid';

        slidePartners.forEach(partner => {
          const item = document.createElement('div');
          item.className = 'partner-item';
          item.innerHTML = `
                           <a href="${partner.web_site}" target="_blank" title="${partner.title}">
      <img 
        style="min-height: 50px; max-width:100%;" 
        src="<?php echo base_url(); ?>assets/front/images/${partner.url_image}" 
        alt="${partner.title}" 
      />
    </a>
                        `;
          // <img style="min-height: 50px; max-width:100%;" rel="nofollow" 
          // src="<?php echo base_url(); ?>assets/front/images/<?php echo $partner['url_image'] ?>" 
          // alt="<?php echo $partner['title'] ?>" />
          grid.appendChild(item);
        });

        slide.appendChild(grid);
        wrapper.appendChild(slide);
      }
    }

    function initSwiper() {
      if (partnersSwiper) {
        partnersSwiper.destroy(true, true);
      }

      buildSlides();

      setTimeout(() => {
        const swiperContainer = document.querySelector('.partners-swiper .swiper');
        if (!swiperContainer) {
          console.error('Swiper container not found');
          return;
        }

        partnersSwiper = new Swiper(swiperContainer, {
          slidesPerView: 1,
          spaceBetween: 30,
          loop: allPartners.length > getItemsPerSlide(),
          autoplay: {
            delay: 4000,
            disableOnInteraction: false,
          },
          navigation: {
            nextEl: '.partners-swiper .swiper-button-next',
            prevEl: '.partners-swiper .swiper-button-prev',
          },
          on: {
            init: function () {
              console.log('Partners Swiper initialized successfully');
            },
            slideChange: function () {
              console.log('Slide changed to:', this.activeIndex);
            }
          }
        });
      }, 100);
    }

    initSwiper();

    let resizeTimeout;
    window.addEventListener('resize', function () {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(initSwiper, 250);
    });
  });
</script>

<!-- Swiper CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/8.4.7/swiper-bundle.min.css">

<!-- Swiper JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/8.4.7/swiper-bundle.min.js"></script>

<script>
  let slideIndex = 0;
  let slideInterval;

  function initSlider() {
    const slides = document.querySelector(".slides");
    const dots = document.querySelectorAll(".dot");

    if (!slides || dots.length === 0) return; // təhlükəsizlik üçün

    // ilk açılışda göstər
    updateSlide();

    // avtomatik slayd keçidi
    slideInterval = setInterval(nextSlide, 4000);

    // hər dot üçün klik eventi əlavə et
    dots.forEach((dot, index) => {
      dot.addEventListener("click", () => {
        currentSlide(index);
      });
    });
  }

  function updateSlide() {
    const slides = document.querySelector(".slides");
    const dots = document.querySelectorAll(".dot");

    // bütün dot-lardan active class sil
    dots.forEach(dot => dot.classList.remove("active"));

    // container-i hərəkət etdir
    slides.style.transform = `translateX(-${slideIndex * 100}%)`;

    // aktiv dot əlavə et
    if (dots[slideIndex]) dots[slideIndex].classList.add("active");
  }

  function nextSlide() {
    const dots = document.querySelectorAll(".dot");
    slideIndex = (slideIndex + 1) % dots.length; // % ilə dinamik dövr
    updateSlide();
  }

  function currentSlide(n) {
    slideIndex = n;
    updateSlide();

    // dot klik ediləndə avtomatik keçidi sıfırla
    clearInterval(slideInterval);
    slideInterval = setInterval(nextSlide, 4000);
  }

  // səhifə yüklənəndə slider işə düşsün
  document.addEventListener("DOMContentLoaded", initSlider);
</script>